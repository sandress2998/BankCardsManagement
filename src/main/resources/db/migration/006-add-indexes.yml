databaseChangeLog:
  # Добавление индексов для оптимизации
  - changeSet:
      context: prod
      id: 007-add-indexes
      author: developer
      changes:
        # Индекс для поиска карт по пользователю (для пагинации)
        - createIndex:
            indexName: idx_card_user_id
            tableName: card
            columns:
              - column:
                  name: user_id
        # Индекс для фильтрации карт по статусу
        - createIndex:
            indexName: idx_card_status
            tableName: card
            columns:
              - column:
                  name: status
        # Индекс для поиска по зашифрованному номеру
        - createIndex:
            indexName: idx_card_encrypted_number
            tableName: card
            columns:
              - column:
                  name: encrypted_number
        # Индекс для поиска пользователей по логину
        - createIndex:
            indexName: idx_user_login
            tableName: user_info
            columns:
              - column:
                  name: login
      rollback:
        - dropIndex:
            indexName: idx_card_user_id
            tableName: card
        - dropIndex:
            indexName: idx_card_status
            tableName: card
        - dropIndex:
            indexName: idx_card_encrypted_number
            tableName: card
        - dropIndex:
            indexName: idx_user_login
            tableName: user_info
